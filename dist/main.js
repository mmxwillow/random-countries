(()=>{"use strict";function e(e){let t=[];return Object.keys(e).forEach((r=>{t.push(e[r].name)})),t.toString()}function t(e){let t=[];return Object.keys(e).forEach((r=>{t.push(e[r])})),t.toString()}const r=document.querySelector(".container");function n(e,t){let r=Object.values(e)[0].toUpperCase(),n=Object.values(t)[0].toUpperCase(),o=0;return r>n?o=1:r<n&&(o=-1),o}const o=document.querySelector("select"),a=document.querySelector('input[type="number"]'),c=document.querySelector("button"),i=document.querySelector("form"),u=document.querySelector(".container");Object.entries({AF:"Africa",AN:"Antarctica",AS:"Asia",EU:"Europe",NA:"North America",OC:"Ocenia",SA:"South America"}).forEach((e=>{const[t,r]=e,n=document.createElement("option");n.innerHTML=r,n.value=t,n.id=t,o.appendChild(n)})),i.addEventListener("submit",(c=>{c.preventDefault(),u.innerHTML="Loading...",async function(e,t){try{const r=await fetch("https://countries.trevorblades.com/",{mode:"cors",method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({query:"query getCountries($code: ID!){\n            continent(code: $code){\n                countries{\n                    name, code\n                }\n            }\n          }",variables:{code:e}})}),n=await r.json();return document.querySelector(".error").innerHTML="",function(e,t){let r=[];if(e>t.length)r=[...t];else for(let n=0;n<e;n++){let e=Math.floor(Math.random()*(t.length-n));r.push(t[e]),t.push(t.splice(e,1)[0])}return r}(t,n.data.continent.countries)}catch(e){return document.querySelector(".error").innerHTML="There's been an error. Try again.",console.error(e),"There's been an error. Try again."}}(o.value,a.value).then((o=>{(async function(r){try{const n=await Promise.all(r.map((e=>fetch(`https://restcountries.com/v3.1/name/${e.name}`,{mode:"cors"})))),o=await Promise.all(n.map((e=>e.json()))),a=[];return o.forEach((r=>{var n;a.push({OfficialName:(n=r[0]).name.official,Capital:n.capital.toString().replaceAll(",",", "),Population:n.population,Currency:e(n.currencies).replaceAll(",",", "),Subregion:n.subregion,Languages:t(n.languages).replaceAll(",",", ")})})),document.querySelector(".error").innerHTML="",a}catch(e){return document.querySelector(".error").innerHTML="There's been an error, couldn't fetch details.",console.error(e),r}})(o).then((e=>{return t=e,r.innerHTML="",void t.sort(n).forEach((e=>{const t=document.createElement("div");t.className="card",Object.entries(e).forEach((e=>{const[r,n]=e,o=document.createElement("p"),a=document.createElement("p");o.className="key",a.className="value",o.innerHTML=r,a.innerHTML=n,t.appendChild(o),t.appendChild(a)})),r.appendChild(t)}));var t}))}))})),a.addEventListener("input",(function(){a.value>=2&&a.value<=10?(c.disabled=!1,i.removeAttribute("data-error")):(c.disabled=!0,i.setAttribute("data-error","Has to be a number between 1 and 11."))}))})();